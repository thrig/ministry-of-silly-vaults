#!/usr/bin/env perl
#
# crawlpaper. like wallpaper, but for crawl. or most any roguelike

use 5.14.0;
use warnings;
use Imager;
use Imager::Fill;

my $outfile = shift // 'crawlpaper.png';

# TWEAK as needed
my $img     = Imager->new( xsize => 1600, ysize => 1200 ) or die;
my $bgcolor = Imager::Color->new("#eeeeee");
my $fgcolor = Imager::Color->new("#000000");
my $fill    = Imager::Fill->new( solid => $bgcolor );
$img->box(
    color => $bgcolor,
    xmin  => 0,
    ymin  => 0,
    xmax  => 1600,
    ymax  => 1200,
    fill  => $fill,
);

# TWEAK this may give errors about Imager::Font::W32 (can't find a
# libgdi32 for OpenBSD) so instead read TTF font file directly
#my $font = Imager::Font->new( face => 'Courier' ) or die "$! $@";
my $font =
  Imager::Font->new( file => "$ENV{HOME}/.fonts/NotoMono-Regular.ttf" )
  or die "could not font";

my $i = 0;
while ( my $line = readline *DATA ) {
    chomp $line;
    # TWEAK these depend on font size, etc
    $img->string(
        x      => 26,
        y      => 48 + 48 * $i,
        font   => $font,
        string => $line,
        size   => 42,
        aa     => 1,
        color  => $fgcolor,
    );
    $i++;
}

$img->write( file => $outfile );

# TWEAK your so-called artwork, here
__DATA__
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
...........................@..................................
..............................................................
.............................>................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
..............................................................
